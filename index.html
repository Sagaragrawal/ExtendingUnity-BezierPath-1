<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Extending Unity - Bézier Path: Tutorial 1 by TobiasKullblikk</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Extending Unity - Bézier Path: Tutorial 1</h1>
      <h2 class="project-tagline">Project overview and implementing the basic features</h2>
      <a href="https://github.com/TobiasKullblikk/ExtendingUnity-BezierPath-1" class="btn">View on GitHub</a>
      <a href="https://github.com/TobiasKullblikk/ExtendingUnity-BezierPath-1/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/TobiasKullblikk/ExtendingUnity-BezierPath-1/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h3>

<p>Unity is well known for its Asset Store and the vast amount of resources available there. Anyone can download tools to simplify the production of their games. Many tools have custom editors for managing the data related to it. Wouldn't it be great to be able to make tools like this ourselves?</p>

<p>Unity offers an extensive API for extending the editor through scripts in your project. Throughout the parts of this guide, we will learn to master this power and become a Wizard of Unity. We'll take a closer look at interacting with points in the scene using Handles, building custom interfaces for the SceneView and customizing the InspectorView to our liking.</p>

<h3>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h3>

<p>Bézier Curves are used to generate smooth curves from a given set of control points. The curves will always start with the same position as the first control point and end at the position of the last. Bézier Curves are popular in computer software as they are easy to implement, easy to use and the quality of the curves can be scaled indefinitely.</p>

<p>Bézier Curves are classified by its order, that is, by how many control points it uses. When working with Bézier Curves in computer software, you are most likely using Cubic Bézier Curves. These curves are of the 4th order, meaning they consists of 4 control points. The following animation illustrates how the value <em>t</em>, ranging from 0.0 to 1.0, can be used to retrieve any position along the Cubic Bézier Curve. Here we have control points 0 &amp; 3 acting as endpoints, while control points 1 &amp; 2 acts like magnetic forces attracting the curve.</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/B%C3%A9zier_3_big.gif/240px-B%C3%A9zier_3_big.gif" alt="">
<img src="https://upload.wikimedia.org/math/2/c/7/2c7967667f039ce77d8984f5e4cd088c.png" alt=""></p>

<p>To make our BezierPath, we simply combine several Cubic Bézier Curves in a continuous sequence like demonstrated in the illustration below. Note that control points 1 &amp; 2 are only visible when connected to a point that is selected. </p>

<p><img src="https://i.gyazo.com/0033536b408c34598c5c438afa09de57.gif" alt=""></p>

<p>Each BezierPoint will hold cached positions for the points generated between the current BezierPoint and the one indexed above it. This list of cached points will be named 'points' in the BezierPoint class. The list will also contain the current BezierPoint position as the first element, and the position of the BezierPoint indexed above it as the last element.</p>

<p><img src="https://i.gyazo.com/05e11314ccdd7583ed967f90aeeef3dd.png" alt=""></p>

<p>When building scripts for the editor, it's important to keep performance in mind. You don't want your tools to be chewing off all the resources Unity and your system has to offer. Seeing how Bézier Curves work, it becomes obvious to us that when a point is being modified, only the connected 'parts' of the path will be affected. We will use this information to narrow down what parts of the BezierPath needs to be regenerated when.</p>

<h3>
<a id="bezierpoint" class="anchor" href="#bezierpoint" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BezierPoint</h3>

<p>For the BezierPoint Class, we are going to store all the information that has to do with each induvidual BezierPoint.</p>

<ul>
<li>Position of the BezierPoint</li>
<li>Position of the back and front handle (both with origin at the position mentioned above)</li>
<li>ArmMode controlling the handle behaviour</li>
<li>Bezier iterations</li>
<li>List of cached points</li>
<li>List of lengths between cached points</li>
<li>Total length</li>
</ul>

<p>Let's make a new C# script <em>"Assets\BezierPath\BezierPoint.cs"</em> and add the following code:</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">using</span> UnityEngine<span class="pl-k">;</span>
<span class="pl-k">using</span> System.Collections.Generic<span class="pl-k">;</span>

[System.Serializable]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">BezierPoint</span>
{
    <span class="pl-c">// TODO: Make handles act according to current ArmMode in the 'set' accessors</span>
    <span class="pl-k">public</span> Vector3 <span class="pl-en">handleBack</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
    <span class="pl-k">public</span> Vector3 <span class="pl-en">handleFront</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

    <span class="pl-k">public</span> Vector3 position;
    <span class="pl-k">public</span> List&lt;Vector3&gt; points = <span class="pl-k">new</span> List&lt;Vector3&gt;();
    <span class="pl-k">public</span> List&lt;<span class="pl-k">float</span>&gt; lengths = <span class="pl-k">new</span> List&lt;<span class="pl-k">float</span>&gt;();
    <span class="pl-k">public</span> <span class="pl-k">float</span> length = <span class="pl-c1">0</span>;
    <span class="pl-k">public</span> <span class="pl-k">int</span> iterations;
    <span class="pl-k">public</span> ArmMode armMode;

    [SerializeField]
    <span class="pl-k">private</span> Vector3 _handleBack, _handleFront;

    <span class="pl-k">public</span> <span class="pl-en">BezierPoint</span>(<span class="pl-k">Vector3</span> <span class="pl-smi">pos</span>, <span class="pl-k">Vector3</span> <span class="pl-smi">_handleB</span>, <span class="pl-k">Vector3</span> <span class="pl-smi">_handleF</span>, <span class="pl-k">int</span> <span class="pl-smi">iter</span>, <span class="pl-k">ArmMode</span> <span class="pl-smi">armM</span>)
    {
        position = pos;
        _handleBack = _handleB;
        _handleFront = _handleF;
        iterations = iter;
        armMode = armM;
    }
}

<span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">ArmMode</span>
{
    Mirror,
    MirrorAngle,
    Induvidual
}</pre></div>

<h3>
<a id="point-iteration" class="anchor" href="#point-iteration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Point Iteration</h3>

<h3>
<a id="bezierpath" class="anchor" href="#bezierpath" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BezierPath</h3>

<h3>
<a id="displaying-the-path" class="anchor" href="#displaying-the-path" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Displaying the path</h3>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/TobiasKullblikk/ExtendingUnity-BezierPath-1">Extending Unity - Bézier Path: Tutorial 1</a> is maintained by <a href="https://github.com/TobiasKullblikk">TobiasKullblikk</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
